## æ¨¡æ¿å­—ç¬¦ä¸²

æ¨¡æ¿å­—ç¬¦ä¸²çš„å‡ ä¸ªç‰¹æ€§ï¼š
- å¯ä»¥åµŒå…¥å˜é‡ï¼Œæˆ–è€…è¡¨è¾¾å¼
- ä¼šä¿ç•™å¤šä¸ªç©ºæ ¼ã€æ¢è¡Œã€ç¼©è¿›

```javascript
//åµŒå…¥å˜é‡
var name = "Kyle"; 
var greeting = `Hello ${name}!`; 
console.log( greeting ); // "Hello Kyle!"


//å¤šè¡Œ
var text = 
`Now is the time for all good men 
to come to the aid of their 
country!`; 
console.log( text ); 
// Now is the time for all good men 
// to come to the aid of their 
// country!var text = 

//æ’å…¥è¡¨è¾¾å¼
function upper(s) { 
    return s.toUpperCase(); 
} 
var who = "reader"; 
var text = 
`A very ${upper( "warm" )} welcome 
to all of you ${upper( `${who}s` )}!`; 
console.log( text ); 
// A very WARM welcome 
// to all of you READERS!

```

## æ ‡ç­¾æ¨¡æ¿
>æ¨¡æ¿å­—ç¬¦ä¸²è¿˜å¯ä»¥è·Ÿåœ¨ä¸€ä¸ªå‡½æ•°åé¢ï¼Œè¯¥å‡½æ•°å°†è¢«è°ƒç”¨æ¥å¤„ç†è¿™ä¸ªæ¨¡æ¿å­—ç¬¦ä¸²ã€‚è¿™è¢«ç§°ä¸º"æ ‡ç­¾æ¨¡æ¿"åŠŸèƒ½ã€‚

```javascript
alert`123`
// ç­‰åŒäº
alert(123)
```

å¦‚æœæ¨¡æ¿å­—ç¬¦ä¸²ä¸­å«æœ‰å˜é‡ï¼Œæ ‡ç­¾æ¨¡æ¿ä¼šè¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œå®ƒä¼šæ ¹æ®åµŒå…¥çš„å˜é‡ï¼ŒæŠŠæ¨¡æ¿å­—ç¬¦ä¸²æ‹†å¼€ã€‚
æ™®é€šå­—ç¬¦ä¸²ç»„æˆæ•°ç»„åšä½ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ’å…¥çš„å˜é‡ä¾æ¬¡ä½œä¸ºç¬¬äºŒä¸ªã€ç¬¬ä¸‰ä¸ª...å˜é‡ã€‚

```javascript
var a = 5;
var b = 10;

tag`Hello ${ a + b } world ${ a * b }`;
// ç­‰åŒäº
tag(['Hello ', ' world ', ''], 15, 50);

function tag(stringArr, value1, value2){
  // ...
}

// ç­‰åŒäº

function tag(stringArr, ...values){
  // ...
}

```
tagå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„çš„æˆå‘˜æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ä¸­é‚£äº›æ²¡æœ‰å˜é‡æ›¿æ¢çš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå˜é‡æ›¿æ¢åªå‘ç”Ÿåœ¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªæˆå‘˜ä¸ç¬¬äºŒä¸ªæˆå‘˜ä¹‹é—´ã€ç¬¬äºŒä¸ªæˆå‘˜ä¸ç¬¬ä¸‰ä¸ªæˆå‘˜ä¹‹é—´ï¼Œä»¥æ­¤ç±»æ¨ã€‚

tagå‡½æ•°çš„å…¶ä»–å‚æ•°ï¼Œéƒ½æ˜¯æ¨¡æ¿å­—ç¬¦ä¸²å„ä¸ªå˜é‡è¢«æ›¿æ¢åçš„å€¼ã€‚ç”±äºæœ¬ä¾‹ä¸­ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²å«æœ‰ä¸¤ä¸ªå˜é‡ï¼Œå› æ­¤tagä¼šæ¥å—åˆ°value1å’Œvalue2ä¸¤ä¸ªå‚æ•°ã€‚


## ä¸ºä»€ä¹ˆè¦æœ‰æ ‡ç­¾æ¨¡æ¿ï¼Ÿ

æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°æ ‡ç­¾æ¨¡æ¿çš„æ—¶å€™ï¼Œä¸ç¦åœ¨æƒ³ä¸ºä»€ä¹ˆè¦æœ‰æ ‡ç­¾æ¨¡æ¿ï¼Œå®ƒæœ‰ä»€ä¹ˆæ™®é€šå‡½æ•°ä¸èƒ½æ›¿ä»£çš„åœ°æ–¹å‘¢ï¼Ÿå¦‚æœæ²¡æœ‰ä¸å¯æ›¿ä»£çš„åœ°æ–¹ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦åˆ›é€ 
å®ƒå‘¢ï¼Ÿ
ç­”æ¡ˆæ˜¯ï¼šæ ‡ç­¾æ¨¡æ¿ç¡®å®æœ‰å®ƒå­˜åœ¨çš„æ„ä¹‰ï¼Œä¹Ÿæœ‰æ™®é€šå‡½æ•°æ— æ³•æ›¿ä»£å®ƒçš„åœ°æ–¹ã€‚

```javascript
const logArgs = (...args) => console.log(...args)

```
å…ˆç”¨æ™®é€šå‡½æ•°å½¢å¼è°ƒç”¨
```javascript
logArgs('a', 'b')
// -> a b
```
å†ç”¨ä¸€ä¸ªç®€å•çš„æ¨¡æ¿å­—ç¬¦ä¸²è¯•è¯•ï¼š
```javascript
logArgs``
// -> ["", raw: Array(1)]
```
ä¸Šé¢è¾“å‡ºäº†ä¸€ä¸ªç©ºæ•°ç»„ï¼Œç„¶åä¼ å…¥ä¸€ä¸ªæœ‰å€¼çš„æ¨¡æ¿å­—ç¬¦ä¸²ï¼š
```javascript
logArgs`I like pizza`
// -> ["I like pizza"]
```

ç°åœ¨ï¼Œè¿›ä¸€æ­¥ç½‘æ¨¡æ¿å­—ç¬¦ä¸²ä¸­ä¼ å…¥å˜é‡
```javascript

const favoriteFood = 'pizza'
//å½“ä½œæ™®é€šå‡½æ•°è°ƒç”¨ï¼Œç›´æ¥å‡ºå…¥æ‹¼æ¥çš„å­—ç¬¦ä¸²
logArgs(`I like ${favoriteFood}.`)
// -> I like pizza.

//ä½¿ç”¨æ ‡ç­¾æ¨¡æ¿ï¼Œä¼šè¾“å‡ºå¤„ç†åçš„å‚æ•°
const favoriteFood = 'pizza'

logArgs`I like ${favoriteFood}.`
// -> ["I like ", "."] "pizza"

```

å˜æ¢è¿‡ç¨‹æ˜¯è¿™æ ·çš„ï¼š

![æ ‡ç­¾æ¨¡æ¿ä¾‹å­](https://user-gold-cdn.xitu.io/2020/4/24/171aa7ce629cc291?w=658&h=188&f=png&s=27166)

å½“æˆ‘ä»¬ä¼ å…¥å¤šä¸ªå˜é‡æ—¶ï¼Œæ¯ä¸€ä¸ªæ’å…¥çš„å˜é‡éƒ½ä½œä¸ºä¸‹ä¸€ä¸ªå‚æ•°äº†
```javascript
const favoriteFood = 'pizza'
const favoriteDrink = 'obi'

logArgs`I like ${favoriteFood} and ${favoriteDrink}.`
// -> ["I like ", " and ", "."] "pizza" "obi"
```
è¿™æ ·çœ‹æ¥ï¼Œæ ‡ç­¾æ¨¡ç‰ˆæœ‰ä»€ä¹ˆå¤§çš„ä½œç”¨å‘¢ï¼Ÿ
```javascript

//æ™®é€šå‡½æ•°
logArgs(`Test ${() => console.log('test')}`)
// -> Test () => console.log('test')

console.log(() => console.log('test'))
// () => console.log('test')
```
æ™®é€šå‡½æ•°ï¼Œé‡åˆ°å˜é‡æ˜¯ä¸€ä¸ªå‡½æ•°æ˜¯ï¼Œä¼šæŠŠå‡½æ•°å˜æˆå­—ç¬¦ä¸²å½¢å¼çš„ï¼Œè€Œæ²¡æœ‰åˆ«çš„å¤„ç†ï¼Œçœ‹çœ‹æ ‡ç­¾æ¨¡æ¿çš„ç‰¹æ®Šä¹‹å¤„ï¼Œ**æ¨¡æ¿å­—ç¬¦ä¸²ä¸­åµŒå…¥å˜é‡**
```javascript
   logArgs`Test ${() => console.log('test')}`
   // -> ["Test", ""] () => console.log('test')

```

å¯ä»¥çœ‹å‡ºï¼Œæ ‡ç­¾æ¨¡æ¿æŠŠæ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å˜é‡è§£æäº†å‡ºæ¥ï¼Œå‡½æ•°è¿˜æ˜¯ä¸€ä¸ªå‡½æ•°ä¸ä¼šå˜æˆå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬æœ‰èƒ½åŠ›æ‹¿åˆ°å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡Œè¿™ä¸ªå‡½æ•°
```javascript
const execFuncArgs = (...args) => args.forEach(arg => {
  if (typeof arg === 'function') {
    arg()
  }
})
```
ä¸Šé¢çš„å‡½æ•°ï¼Œæˆ‘ä»¬ä¼šå¿½ç•¥ä¸æ˜¯å‡½æ•°çš„å‚æ•°ï¼Œæ˜¯å‡½æ•°å°±æ‰§è¡Œå®ƒ

```javascript
execFuncArgs('a', 'b')
// -> undefined

execFuncArgs(() => { console.log('this is a function') })
// -> "this is a function"

execFuncArgs('a', () => { console.log('another one') })
// -> "another one"
```

è®©æˆ‘ä»¬æŠŠå®ƒå½“ä½œæ™®é€šå‡½æ•°æ¥è°ƒç”¨å¸¦æœ‰å˜é‡çš„æ¨¡æ¿å­—ç¬¦ä¸²
```javascript
execFuncArgs(`Hi, ${() => { console.log('Executed!') }}`)
// -> undefined
```
ä¸ºä»€ä¹ˆä¼šæ˜¯`undfined`å‘¢ï¼Ÿå› ä¸ºï¼Œæ™®é€šå‡½æ•°è°ƒç”¨çš„æ–¹å¼ï¼Œæ¨¡æ¿å­—ç¬¦ä¸²ä¼šå…¨éƒ¨å˜æˆå­—ç¬¦ä¸²çš„å½¢å¼ï¼Œå˜é‡ä¹Ÿå˜æˆäº†å­—ç¬¦ä¸²çš„å½¢å¼
å®é™…ä¸Šè°ƒç”¨å‚æ•°æ˜¯è¿™æ ·çš„ï¼š `"Hi, () => { console.log('I got executed!') }".`

æŠŠä¸Šé¢çš„å‡½æ•°å½“ä½œ"æ ‡ç­¾æ¨¡æ¿"æ¥è°ƒç”¨

```javascript
execFuncArgs`Hi, ${() => { console.log('Executed!') }}`
// -> "Executed!"
```

ä¸ä¹‹å‰ç›¸åï¼Œ`execFuncArgs`çš„ç¬¬äºŒä¸ªå‚æ•°å®é™…ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚
ç”±æ­¤å¯ä»¥è§£å†³æˆ‘çš„ç–‘é—®äº†ï¼š
**æ ‡ç­¾æ¨¡æ¿å¯ä»¥å¯¹ä¼ å…¥çš„æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„å˜é‡ï¼Œè¿›è¡Œæå–ï¼Œå¹¶è¿›ä¸€æ­¥å¤„ç†ï¼Œæ™®é€šå‡½æ•°æ ¹æœ¬å–ä¸åˆ°è¿™äº›å˜é‡ï¼Œå°±ç”­æè¿›ä¸€æ­¥å¤„ç†äº†ã€‚**

## æ ‡ç­¾æ¨¡æ¿çš„å®é™…åº”ç”¨

â€œæ ‡ç­¾æ¨¡æ¿â€çš„ä¸€ä¸ªé‡è¦åº”ç”¨ï¼Œå°±æ˜¯è¿‡æ»¤HTMLå­—ç¬¦ä¸²ï¼Œé˜²æ­¢ç”¨æˆ·è¾“å…¥æ¶æ„å†…å®¹ã€‚
```javascript

var message =
  SaferHTML`<p>${sender} has sent you a message.</p>`;

function SaferHTML(templateData) {
  var s = templateData[0];
  for (var i = 1; i < arguments.length; i++) {
    var arg = String(arguments[i]);

    // Escape special characters in the substitution.
    s += arg.replace(/&/g, "&amp;")
            .replace(/</g, "&lt;")
            .replace(/>/g, "&gt;");

    // Don't escape special characters in the template.
    s += templateData[i];
  }
  return s;
}

```

ä¸Šé¢ä»£ç ä¸­ï¼Œsenderå˜é‡å¾€å¾€æ˜¯ç”¨æˆ·æä¾›çš„ï¼Œç»è¿‡SaferHTMLå‡½æ•°å¤„ç†ï¼Œé‡Œé¢çš„ç‰¹æ®Šå­—ç¬¦éƒ½ä¼šè¢«è½¬ä¹‰ã€‚
```javascript

var sender = '<script>alert("abc")</script>'; // æ¶æ„ä»£ç 
var message = SaferHTML`<p>${sender} has sent you a message.</p>`;

message
// <p>&lt;script&gt;alert("abc")&lt;/script&gt; has sent you a message.</p>
```

æ ‡ç­¾æ¨¡æ¿çš„å¦ä¸€ä¸ªåº”ç”¨ï¼Œå°±æ˜¯å¤šè¯­è¨€è½¬æ¢ï¼ˆå›½é™…åŒ–å¤„ç†ï¼‰ã€‚

```javascript
i18n`Welcome to ${siteName}, you are visitor number ${visitorNumber}!`
// "æ¬¢è¿è®¿é—®xxxï¼Œæ‚¨æ˜¯ç¬¬xxxxä½è®¿é—®è€…ï¼"
```

è¿˜æœ‰`common-tags`åº“ä¸­çš„`oneLine`æ ‡ç­¾å‡½æ•°

```javascript
import {oneLine} from 'common-tags'

oneLine`
  foo
  bar
  baz
`
// "foo bar baz"
```

æ€»ä¹‹ï¼Œæ ‡ç­¾æ¨¡æ¿åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œå¯èƒ½ä¸€å¼€å§‹å¹¶ä¸ä¼šè§‰å¾—å‰å®³ä¹‹å¤„ï¼Œå¹³æ—¶å·¥ä½œä¸­ä¹Ÿä¸ä¼šç”¨åˆ°ï¼Œä½†æ˜¯è¿™äº›çŸ¥è¯†æ˜¯æœ‰ç”¨çš„ï¼Œåœ¨å¾ˆå¤šåº“ä¸­ä¼šç”¨åˆ°å®ƒï¼Œæˆ‘ä»¬
ä½¿ç”¨è¿™äº›åº“çš„æ—¶å€™ä¹Ÿåœ¨ä¸è‡ªè§‰ä¸­ä½¿ç”¨äº†æ ‡ç­¾æ¨¡æ¿ï¼Œå¯ä»¥æ…¢æ…¢å¼€å§‹äº†è§£å®ƒï¼Œå¹¶ä½¿ç”¨å®ƒã€‚

å‚è€ƒæ–‡ç« ï¼š

[ES6 Tagged Template Literals](https://www.freecodecamp.org/news/es6-tagged-template-literals-48a70ef3ed4d/)

[The magic behind ğŸ’… styled-components](https://mxstbr.blog/2016/11/styled-components-magic-explained/)